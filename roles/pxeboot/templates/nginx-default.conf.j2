# RHDC PXE Boot Server - HTTP Configuration
# Serves RHEL ISOs, kernels, and initrd files
# Managed by Ansible - DO NOT EDIT MANUALLY

server {
    listen {{ pxeboot_http_port }} default_server;
    listen [::]:{{ pxeboot_http_port }} default_server;

    server_name _;

    # Root directory points to RHEL ISOs mount
    root {{ pxeboot_iso_mount_base }};

    # Enable directory listing
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime on;

    # Large file support (ISOs are 10GB+)
    client_max_body_size 0;

    # Logging
    access_log /var/log/nginx/pxeboot-access.log;
    error_log /var/log/nginx/pxeboot-error.log;

    # Serve all files
    location / {
        try_files $uri $uri/ =404;
    }
}
