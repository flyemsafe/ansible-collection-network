---
##################################################
# netboot.xyz Role - Default Variables
##################################################
# These variables control the deployment and customization
# of the netboot.xyz PXE boot server.
#
# Override these in your playbook vars or inventory as needed.
##################################################

# ===================================================
# Container Configuration
# ===================================================

# netboot.xyz container image
netbootxyz_image: "ghcr.io/netbootxyz/netbootxyz:latest"

# Storage directories (must be on mounted filesystem)
netbootxyz_config_dir: "/opt/podman/containers/netbootxyz/config"
netbootxyz_assets_dir: "/opt/podman/containers/netbootxyz/assets"

# Timezone for container
netbootxyz_timezone: "America/New_York"

# ===================================================
# Port Configuration
# ===================================================

# Web UI port
netbootxyz_web_port: 3000

# HTTP boot port (with host networking, uses native port)
netbootxyz_http_port: 80

# TFTP port (privileged, requires root container)
netbootxyz_tftp_port: 69

# ===================================================
# Customization - Branding
# ===================================================

# Site name displayed in boot menu and Web UI
# Default: "Rodhouse Datacenter"
# Options: "RHDC", "Rodhouse Datacenter", "Your Custom Name"
netbootxyz_site_name: "Rodhouse Datacenter"

# Boot timeout in milliseconds (how long menu waits before auto-boot)
# Default: 60000 (60 seconds)
# Options: 30000 (30s), 60000 (60s), 300000 (5min - netboot.xyz default)
netbootxyz_boot_timeout: 60000

# ===================================================
# Customization - Custom Menus
# ===================================================

# Enable custom menu system
# When true, creates local menu directory and custom entries
netbootxyz_enable_custom_menus: true

# Enable OpenShift-specific boot menu
# Creates rhdc-openshift.ipxe with CoreOS and OpenShift options
netbootxyz_enable_openshift_menu: true

# Enable ARM/Raspberry Pi boot menu
# Creates rhdc-arm.ipxe with Fedora ARM, Raspberry Pi OS, Home Assistant options
netbootxyz_enable_arm_menu: true

# Enable simplified main menu (optional)
# Replaces default menu with RHDC-specific menu showing only relevant OSes
# Default: false (keep standard netboot.xyz menu)
# Set to true to use custom streamlined menu
netbootxyz_enable_simplified_main: false

# ===================================================
# Firewall Configuration
# ===================================================

# Configure host firewall (firewalld)
# When true, opens required ports on the host
netbootxyz_configure_firewall: true

# Firewall zone to configure
netbootxyz_firewall_zone: "public"

# Firewall ports to open
netbootxyz_firewall_ports:
  - "{{ netbootxyz_web_port }}/tcp"    # Web UI
  - "{{ netbootxyz_http_port }}/tcp"   # HTTP boot
  - "{{ netbootxyz_tftp_port }}/udp"   # TFTP

# ===================================================
# Container Behavior
# ===================================================

# Use host networking (required for proper DNS resolution)
# With host networking, port mapping is not needed
netbootxyz_use_host_networking: true

# Auto-restart container on failure
netbootxyz_auto_restart: true

# Container restart policy
# Options: always, on-failure, unless-stopped
netbootxyz_restart_policy: "always"

# Container startup timeout (seconds)
netbootxyz_timeout_start: 300

# Container stop timeout (seconds)
netbootxyz_timeout_stop: 70

# ===================================================
# Service Management
# ===================================================

# Systemd service name
netbootxyz_service_name: "netbootxyz.service"

# Systemd service file location
netbootxyz_service_file: "/etc/systemd/system/{{ netbootxyz_service_name }}"

# Enable service on boot
netbootxyz_service_enabled: true

# Start service after deployment
netbootxyz_service_started: true

# ===================================================
# Verification and Validation
# ===================================================

# Wait for service to be ready after start
netbootxyz_wait_for_ready: true

# Wait timeout (seconds)
netbootxyz_wait_timeout: 60

# Delay before checking (seconds)
netbootxyz_wait_delay: 5

# ===================================================
# OpenShift/CoreOS Configuration (when enabled)
# ===================================================

# Fedora CoreOS versions to include in OpenShift menu
# These are populated from netboot.xyz endpoints
netbootxyz_coreos_stable_version: "42.20250721.3.0"
netbootxyz_coreos_testing_version: "42.20250803.2.0"
netbootxyz_coreos_next_version: "42.20250803.1.0"

# Default ignition config URL (if using pre-configured ignition)
# Leave empty to prompt user during boot
# Example: "http://tuareg.lab.rodhouse.net:80/assets/bootstrap.ign"
netbootxyz_default_ignition_url: ""

# ===================================================
# Advanced Configuration
# ===================================================

# Pull container image before starting
# Set to false to use locally cached image
netbootxyz_pull_image: true

# Force remove existing container before start
# Ensures clean state on each run
netbootxyz_force_remove_existing: true

# SELinux context for volume mounts
# :Z = private unshared label
# :z = shared label (use if multiple containers access same volume)
netbootxyz_selinux_context: "Z"

# Additional environment variables for container
# Add custom vars here if needed
netbootxyz_extra_env_vars: {}
# Example:
# netbootxyz_extra_env_vars:
#   CUSTOM_VAR: "value"
#   ANOTHER_VAR: "another_value"

# Additional volumes to mount (if needed)
# Format: ["source:dest:options", ...]
netbootxyz_extra_volumes: []
# Example:
# netbootxyz_extra_volumes:
#   - "/opt/custom-isos:/assets/custom:ro"
